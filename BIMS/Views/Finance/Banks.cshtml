@model IEnumerable<BIMS.Models.Bank>
@{ ViewData["Title"] = "Banks"; var currentLang = Context.Session.GetString("Language") ?? "en"; }

<div class="container-modern">
    <div class="page-header">
        <h1 class="page-title">
            <span class="icon">üè¶</span>
            @(currentLang == "ar" ? "ÿßŸÑÿ®ŸÜŸàŸÉ" : "Banks")
        </h1>
        <div class="header-actions">
            <a asp-action="CreateBank" class="btn-primary">
                <span>‚ûï</span> @(currentLang == "ar" ? "ÿ•ÿ∂ÿßŸÅÿ© ÿ®ŸÜŸÉ ÿ¨ÿØŸäÿØ" : "Add New Bank")
            </a>
        </div>
    </div>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success">
            <span class="alert-icon">‚úÖ</span>
            <span>@TempData["SuccessMessage"]</span>
        </div>
    }

    <div class="card-modern">
        <div class="card-body">
            <div class="table-responsive">
                <table class="table-modern">
                    <thead>
                        <tr>
                            <th>@(currentLang == "ar" ? "ÿßÿ≥ŸÖ ÿßŸÑÿ®ŸÜŸÉ" : "Bank Name")</th>
                            <th>@(currentLang == "ar" ? "ÿßŸÑÿ±ŸÖÿ≤" : "Code")</th>
                            <th>@(currentLang == "ar" ? "IBAN" : "IBAN")</th>
                            <th>@(currentLang == "ar" ? "ÿ±ŸÖÿ≤ SWIFT" : "SWIFT Code")</th>
                            <th>@(currentLang == "ar" ? "ÿßÿ≥ŸÖ ÿßŸÑŸÅÿ±ÿπ" : "Branch Name")</th>
                            <th>@(currentLang == "ar" ? "ÿßŸÑÿ≠ÿßŸÑÿ©" : "Status")</th>
                            <th class="action-column">@(currentLang == "ar" ? "ÿßŸÑÿ•ÿ¨ÿ±ÿßÿ°ÿßÿ™" : "Actions")</th>
                        </tr>
                    </thead>
                    <tbody>
                        @if (Model.Any())
                        {
                            @foreach (var bank in Model)
                            {
                                <tr>
                                    <td>
                                        <strong>@(currentLang == "ar" && !string.IsNullOrEmpty(bank.NameAr) ? bank.NameAr : bank.Name)</strong>
                                    </td>
                                    <td>@(bank.Code ?? "-")</td>
                                    <td><code>@(bank.IBAN ?? "-")</code></td>
                                    <td>@(bank.SwiftCode ?? "-")</td>
                                    <td>@(currentLang == "ar" && !string.IsNullOrEmpty(bank.BranchNameAr) ? bank.BranchNameAr : (bank.BranchName ?? "-"))</td>
                                    <td>
                                        @if (bank.IsActive)
                                        {
                                            <span class="badge badge-success">@(currentLang == "ar" ? "ŸÜÿ¥ÿ∑" : "Active")</span>
                                        }
                                        else
                                        {
                                            <span class="badge badge-danger">@(currentLang == "ar" ? "ÿ∫Ÿäÿ± ŸÜÿ¥ÿ∑" : "Inactive")</span>
                                        }
                                    </td>
                                    <td class="action-column">
                                        <div class="action-buttons">
                                            <a asp-action="EditBank" asp-route-id="@bank.Id" class="btn-icon btn-edit" title="@(currentLang == "ar" ? "ÿ™ÿπÿØŸäŸÑ" : "Edit")">
                                                ‚úèÔ∏è
                                            </a>
                                            <a asp-action="DeleteBank" asp-route-id="@bank.Id" class="btn-icon btn-delete" title="@(currentLang == "ar" ? "ÿ≠ÿ∞ŸÅ" : "Delete")">
                                                üóëÔ∏è
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            }
                        }
                        else
                        {
                            <tr>
                                <td colspan="7" class="text-center empty-state">
                                    <div class="empty-icon">üè¶</div>
                                    <p>@(currentLang == "ar" ? "ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ®ŸÜŸàŸÉ ŸÖÿ™ÿßÿ≠ÿ©" : "No banks available")</p>
                                    <a asp-action="CreateBank" class="btn-primary-sm">
                                        @(currentLang == "ar" ? "ÿ•ÿ∂ÿßŸÅÿ© ÿ®ŸÜŸÉ ÿ¨ÿØŸäÿØ" : "Add New Bank")
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<style>
    .container-modern { padding: 30px; max-width: 1400px; margin: 0 auto; }
    .page-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
    .page-title { font-size: 32px; font-weight: 700; color: var(--navy-dark); display: flex; align-items: center; gap: 12px; margin: 0; }
    .icon { font-size: 36px; }
    .header-actions { display: flex; gap: 15px; }
    .btn-primary { padding: 12px 24px; background: linear-gradient(135deg, var(--primary-teal), var(--teal-dark)); color: white; border: none; border-radius: 10px; font-size: 15px; font-weight: 600; cursor: pointer; text-decoration: none; display: flex; align-items: center; gap: 8px; transition: all 0.3s ease; box-shadow: 0 4px 12px rgba(0, 166, 166, 0.3); }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0, 166, 166, 0.4); }
    .btn-primary-sm { padding: 10px 20px; background: linear-gradient(135deg, var(--primary-teal), var(--teal-dark)); color: white; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; gap: 6px; transition: all 0.3s ease; }
    .alert { padding: 16px 20px; border-radius: 12px; margin-bottom: 25px; display: flex; align-items: center; gap: 12px; animation: slideDown 0.3s ease-out; }
    .alert-success { background: #d4edda; border: 1px solid #c3e6cb; color: #155724; }
    .alert-icon { font-size: 20px; }
    .card-modern { background: white; border-radius: 16px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08); overflow: hidden; }
    .card-body { padding: 0; }
    .table-responsive { overflow-x: auto; }
    .table-modern { width: 100%; border-collapse: collapse; }
    .table-modern thead { background: linear-gradient(135deg, #f8f9fa, #e9ecef); }
    .table-modern th { padding: 18px 20px; text-align: left; font-weight: 700; color: var(--navy-dark); font-size: 14px; text-transform: uppercase; letter-spacing: 0.5px; border-bottom: 2px solid #dee2e6; }
    .table-modern td { padding: 18px 20px; border-bottom: 1px solid #f0f0f0; color: #333; font-size: 14px; }
    .table-modern tbody tr { transition: all 0.2s ease; }
    .table-modern tbody tr:hover { background: #f8f9fa; transform: scale(1.01); }
    .table-modern tbody tr:last-child td { border-bottom: none; }
    .action-column { width: 120px; text-align: center; }
    .action-buttons { display: flex; gap: 8px; justify-content: center; }
    .btn-icon { width: 36px; height: 36px; display: inline-flex; align-items: center; justify-content: center; border-radius: 8px; font-size: 16px; text-decoration: none; transition: all 0.3s ease; cursor: pointer; }
    .btn-edit { background: #fff3cd; color: #856404; border: 1px solid #ffeaa7; }
    .btn-edit:hover { background: #ffc107; transform: scale(1.1); }
    .btn-delete { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    .btn-delete:hover { background: #dc3545; color: white; transform: scale(1.1); }
    .badge { padding: 6px 12px; border-radius: 20px; font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }
    .badge-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
    .badge-danger { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
    .empty-state { padding: 60px 20px !important; text-align: center; }
    .empty-icon { font-size: 64px; margin-bottom: 20px; opacity: 0.5; }
    .empty-state p { font-size: 18px; color: #666; margin-bottom: 25px; }
    .text-center { text-align: center; }
    code { background: #f4f4f4; padding: 4px 8px; border-radius: 4px; font-size: 13px; font-family: 'Courier New', monospace; }
    @@keyframes slideDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }
    @@media (max-width: 768px) { .page-header { flex-direction: column; align-items: flex-start; gap: 15px; } .table-modern { font-size: 12px; } .table-modern th, .table-modern td { padding: 12px 10px; } }
</style>