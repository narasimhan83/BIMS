@model IEnumerable<BIMS.Models.Customer>
@{
    ViewData["Title"] = "Customers";
    var currentLang = Context.Session.GetString("Language") ?? "en";
}

<div class="masters-container">
    <div class="masters-header">
        <h1><i class="icon">ğŸ‘¥</i> @(currentLang == "ar" ? "Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡" : "Customers")</h1>
        <a asp-action="CreateCustomer" class="btn-create">
            <span>â•</span> @(currentLang == "ar" ? "Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„ Ø¬Ø¯ÙŠØ¯" : "Add New Customer")
        </a>
    </div>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success">âœ“ @TempData["SuccessMessage"]</div>
    }

    <div class="table-container">
        <table class="data-table">
            <thead>
                <tr>
                    <th>@(currentLang == "ar" ? "Ø§Ø³Ù… Ø§Ù„Ø¹Ù…ÙŠÙ„" : "Customer Name")</th>
                    <th>@(currentLang == "ar" ? "Ø§Ù„Ù†ÙˆØ¹" : "Type")</th>
                    <th>@(currentLang == "ar" ? "Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø©" : "Group")</th>
                    <th>@(currentLang == "ar" ? "Ø§Ù„ÙˆÙƒÙŠÙ„" : "Agent")</th>
                    <th>@(currentLang == "ar" ? "Ø§Ù„Ø¬ÙˆØ§Ù„" : "Mobile")</th>
                    <th>@(currentLang == "ar" ? "Ø§Ù„Ø¨Ø±ÙŠØ¯" : "Email")</th>
                    <th>@(currentLang == "ar" ? "Ø§Ù„Ù…Ø³ØªÙ†Ø¯Ø§Øª" : "Docs")</th>
                    <th>@(currentLang == "ar" ? "Ø§Ù„Ù…Ø±ÙƒØ¨Ø§Øª" : "Vehicles")</th>
                    <th>@(currentLang == "ar" ? "Ø§Ù„Ø­Ø§Ù„Ø©" : "Status")</th>
                    <th>@(currentLang == "ar" ? "Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª" : "Actions")</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model)
                {
                    <tr>
                        <td><strong>@(currentLang == "ar" && !string.IsNullOrEmpty(item.CustomerNameAr) ? item.CustomerNameAr : item.CustomerName)</strong></td>
                        <td>@(currentLang == "ar" && !string.IsNullOrEmpty(item.CustomerType?.NameAr) ? item.CustomerType.NameAr : item.CustomerType?.Name)</td>
                        <td>@(item.CustomerGroup != null ? (currentLang == "ar" && !string.IsNullOrEmpty(item.CustomerGroup.GroupNameAr) ? item.CustomerGroup.GroupNameAr : item.CustomerGroup.GroupName) : "-")</td>
                        <td>@(item.Agent != null ? item.Agent.Name : "-")</td>
                        <td>@(item.MobilePhone ?? "-")</td>
                        <td>@(item.Email ?? "-")</td>
                        <td><span class="badge badge-info">@(item.Documents?.Count ?? 0)</span></td>
                        <td><span class="badge badge-info">@(item.Vehicles?.Count ?? 0)</span></td>
                        <td>
                            @if (item.IsActive) { <span class="badge badge-success">@(currentLang == "ar" ? "Ù†Ø´Ø·" : "Active")</span> }
                            else { <span class="badge badge-danger">@(currentLang == "ar" ? "ØºÙŠØ± Ù†Ø´Ø·" : "Inactive")</span> }
                        </td>
                        <td class="actions">
                            <a asp-action="DetailsCustomer" asp-route-id="@item.Id" class="btn-view" title="@(currentLang == "ar" ? "Ø¹Ø±Ø¶" : "View")"><span>ğŸ‘ï¸</span></a>
                            <a asp-action="EditCustomer" asp-route-id="@item.Id" class="btn-edit" title="@(currentLang == "ar" ? "ØªØ¹Ø¯ÙŠÙ„" : "Edit")"><span>âœï¸</span></a>
                            <a asp-action="DeleteCustomer" asp-route-id="@item.Id" class="btn-delete" title="@(currentLang == "ar" ? "Ø­Ø°Ù" : "Delete")"><span>ğŸ—‘ï¸</span></a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

<style>
    .masters-container { padding: 20px; }
    .masters-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
    .masters-header h1 { font-size: 28px; color: var(--navy-dark); display: flex; align-items: center; gap: 10px; }
    .btn-create { padding: 12px 24px; background: linear-gradient(135deg, var(--primary-teal), var(--teal-dark)); color: white; border: none; border-radius: 8px; text-decoration: none; font-weight: 600; display: flex; align-items: center; gap: 8px; transition: all 0.3s ease; }
    .btn-create:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 166, 166, 0.3); }
    .alert { padding: 15px 20px; border-radius: 8px; margin-bottom: 20px; }
    .alert-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
    .table-container { background: white; border-radius: 12px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1); overflow: hidden; }
    .data-table { width: 100%; border-collapse: collapse; }
    .data-table thead { background: linear-gradient(135deg, var(--navy-dark), var(--navy-medium)); color: white; }
    .data-table th { padding: 15px; text-align: left; font-weight: 600; font-size: 14px; text-transform: uppercase; }
    .data-table td { padding: 15px; border-bottom: 1px solid #f0f0f0; }
    .data-table tbody tr:hover { background: #f8f9fa; }
    .actions { display: flex; gap: 8px; }
    .btn-view, .btn-edit, .btn-delete { padding: 8px 12px; border-radius: 6px; text-decoration: none; transition: all 0.3s ease; font-size: 16px; }
    .btn-view { background: #17a2b8; color: white; }
    .btn-view:hover { background: #138496; transform: scale(1.1); }
    .btn-edit { background: #ffc107; color: white; }
    .btn-edit:hover { background: #e0a800; transform: scale(1.1); }
    .btn-delete { background: #dc3545; color: white; }
    .btn-delete:hover { background: #c82333; transform: scale(1.1); }
    .badge { padding: 5px 12px; border-radius: 12px; font-size: 12px; font-weight: 600; }
    .badge-success { background: #28a745; color: white; }
    .badge-danger { background: #dc3545; color: white; }
    .badge-info { background: #17a2b8; color: white; }
</style>